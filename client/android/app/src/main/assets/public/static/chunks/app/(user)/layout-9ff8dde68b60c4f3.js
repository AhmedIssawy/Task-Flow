(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[3318],{25731:(e,r,t)=>{"use strict";t.d(r,{A:()=>a});let a=(t(6267).Ii.isNativePlatform()?"http://192.168.56.1:5000/api":"http://localhost:5000/api")||"http://localhost:5000/api"},26126:(e,r,t)=>{"use strict";t.d(r,{E:()=>l});var a=t(95155);t(12115);var s=t(99708),o=t(74466),n=t(59434);let i=(0,o.F)("inline-flex items-center justify-center rounded-md border px-2 py-0.5 text-xs font-medium w-fit whitespace-nowrap shrink-0 [&>svg]:size-3 gap-1 [&>svg]:pointer-events-none focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px] aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive transition-[color,box-shadow] overflow-hidden",{variants:{variant:{default:"border-transparent bg-primary text-primary-foreground [a&]:hover:bg-primary/90",secondary:"border-transparent bg-secondary text-secondary-foreground [a&]:hover:bg-secondary/90",destructive:"border-transparent bg-destructive text-white [a&]:hover:bg-destructive/90 focus-visible:ring-destructive/20 dark:focus-visible:ring-destructive/40 dark:bg-destructive/60",outline:"text-foreground [a&]:hover:bg-accent [a&]:hover:text-accent-foreground"}},defaultVariants:{variant:"default"}});function l(e){let{className:r,variant:t,asChild:o=!1,...l}=e,d=o?s.DX:"span";return(0,a.jsx)(d,{"data-slot":"badge",className:(0,n.cn)(i({variant:t}),r),...l})}},30004:(e,r,t)=>{"use strict";t.d(r,{A:()=>l});var a=t(95155);t(12115);var s=t(54011),o=t(59434);function n(e){let{className:r,...t}=e;return(0,a.jsx)(s.bL,{"data-slot":"avatar",className:(0,o.cn)("relative flex size-8 shrink-0 overflow-hidden rounded-full",r),...t})}function i(e){let{className:r,...t}=e;return(0,a.jsx)(s.H4,{"data-slot":"avatar-fallback",className:(0,o.cn)("bg-muted flex size-full items-center justify-center rounded-full",r),...t})}function l(e){let{name:r,onClick:t}=e;return(0,a.jsx)(n,{className:"h-10 w-10 ring-2 ring-primary/20 rounded-2xl cursor-pointer",onClick:t,children:(0,a.jsx)(i,{className:"bg-primary text-primary-foreground font-medium rounded-2xl font-primary",children:null==r?void 0:r.split(" ").map(e=>e[0]).join("")})})}},30512:(e,r,t)=>{"use strict";t.d(r,{c:()=>c});var a=t(95155),s=t(5196),o=t(30285),n=t(44838),i=t(34529),l=t(28813);let d=e=>{let{country:r,className:t="w-4 h-4"}=e,s=(0,l.VV)(r);return(0,a.jsx)("span",{className:"".concat(t," flex items-center justify-center text-lg leading-none transition-transform duration-200 hover:scale-110"),children:s})};function c(){let{switchLanguage:e,availableLocales:r,currentLocaleInfo:t,isPending:l}=(0,i.o)();return(0,a.jsxs)(n.rI,{children:[(0,a.jsx)(n.ty,{asChild:!0,children:(0,a.jsxs)(o.$,{variant:"outline",size:"sm",disabled:l,className:"h-9 px-3 bg-background hover:bg-accent border-border hover:border-primary/50 transition-all duration-200 shadow-sm hover:shadow-md ".concat(l?"opacity-70 cursor-not-allowed":""),"aria-label":"Current language: ".concat(null==t?void 0:t.name,". Click to change language."),children:[(0,a.jsx)(d,{country:(null==t?void 0:t.code)||"en",className:"w-4 h-4 mr-2 flag-icon ".concat(l?"animate-pulse":"")}),(0,a.jsx)("span",{className:"font-medium",children:null==t?void 0:t.name}),l&&(0,a.jsx)("div",{className:"ml-2 w-3 h-3 border border-current border-t-transparent rounded-full animate-spin","aria-label":"Changing language..."})]})}),(0,a.jsx)(n.SQ,{align:"end",className:"bg-card/95 backdrop-blur-md border border-border/50 shadow-xl rounded-xl min-w-[160px] p-1 dropdown-content-enhanced",sideOffset:4,children:r.map(r=>{let o=(null==t?void 0:t.code)===r.code;return(0,a.jsxs)(n._2,{onClick:()=>{var a;(a=r.code)!==(null==t?void 0:t.code)&&e(a)},disabled:l||o,className:"flex items-center gap-3 px-3 py-2.5 cursor-pointer rounded-lg transition-all duration-200 focus:outline-none focus:ring-2 focus:ring-primary/50 ".concat(o?"bg-primary/10 text-primary cursor-default":l?"opacity-50 cursor-not-allowed":"hover:bg-accent hover:text-accent-foreground active:bg-accent/80"),"aria-label":"Switch to ".concat(r.name),children:[(0,a.jsx)(d,{country:r.code,className:"w-4 h-4 flag-icon ".concat(l&&!o?"opacity-50":"")}),(0,a.jsx)("span",{className:"font-medium flex-1",children:r.name}),o&&(0,a.jsx)(s.A,{className:"w-4 h-4 text-primary animate-in fade-in-0 zoom-in-95 duration-200","aria-label":"Current language"})]},r.code)})})]})}},59247:(e,r,t)=>{"use strict";t.d(r,{default:()=>n});var a=t(95155),s=t(12115),o=t(35695);function n(){let[e,r]=(0,s.useState)(4),t=(0,o.useRouter)();return(0,s.useEffect)(()=>{let e=setInterval(()=>{r(r=>(1===r&&(clearInterval(e),t.replace("/login")),r-1))},1e3);return()=>clearInterval(e)},[t]),(0,a.jsxs)("div",{className:"flex h-screen flex-col items-center justify-center text-center px-4",children:[(0,a.jsx)("h1",{className:"text-3xl font-semibold text-destructive",children:"Unauthorized"}),(0,a.jsx)("p",{className:"mt-2 text-muted-foreground",children:"You don’t have access to this page."}),(0,a.jsxs)("p",{className:"mt-2 text-sm",children:["Redirecting to login in ",(0,a.jsx)("span",{className:"font-medium",children:e})," seconds..."]})]})}},66681:(e,r,t)=>{"use strict";t.d(r,{A:()=>s});var a=t(86434);let s=()=>{var e,r,t;let{data:s,isLoading:o,isError:n}=(0,a.CR)();return{user:null==s?void 0:s.data,isLoading:o,isError:n,isLoggedIn:!!s,role:null==s||null==(e=s.data)?void 0:e.role,id:null==s||null==(r=s.data)?void 0:r.id,mongoId:null==s||null==(t=s.data)?void 0:t._id}}},71185:(e,r,t)=>{"use strict";t.d(r,{U:()=>c});var a=t(95155);t(12115);var s=t(62098),o=t(93509),n=t(14738),i=t(51362),l=t(30285),d=t(44838);function c(){let{setTheme:e,theme:r}=(0,i.D)();return(0,a.jsxs)(d.rI,{children:[(0,a.jsx)(d.ty,{asChild:!0,children:(0,a.jsxs)(l.$,{variant:"ghost",size:"icon",className:"relative hover:bg-accent transition-all duration-200",children:[(0,a.jsx)(s.A,{className:"h-[1.2rem] w-[1.2rem] rotate-0 scale-100 transition-all dark:-rotate-90 dark:scale-0 theme-icon"}),(0,a.jsx)(o.A,{className:"absolute h-[1.2rem] w-[1.2rem] rotate-90 scale-0 transition-all dark:rotate-0 dark:scale-100 theme-icon"}),(0,a.jsx)("span",{className:"sr-only",children:"Toggle theme"})]})}),(0,a.jsxs)(d.SQ,{align:"end",className:"bg-card/95 backdrop-blur-md border border-border/50 shadow-xl rounded-xl min-w-[140px] dropdown-content-enhanced",children:[(0,a.jsxs)(d._2,{onClick:()=>e("light"),className:"flex items-center gap-3 px-3 py-2.5 cursor-pointer rounded-lg transition-all duration-200 ".concat("light"===r?"bg-primary/10 text-primary":"hover:bg-accent hover:text-accent-foreground"),children:[(0,a.jsx)(s.A,{className:"h-4 w-4"}),(0,a.jsx)("span",{className:"font-medium",children:"Light"})]}),(0,a.jsxs)(d._2,{onClick:()=>e("dark"),className:"flex items-center gap-3 px-3 py-2.5 cursor-pointer rounded-lg transition-all duration-200 ".concat("dark"===r?"bg-primary/10 text-primary":"hover:bg-accent hover:text-accent-foreground"),children:[(0,a.jsx)(o.A,{className:"h-4 w-4"}),(0,a.jsx)("span",{className:"font-medium",children:"Dark"})]}),(0,a.jsxs)(d._2,{onClick:()=>e("system"),className:"flex items-center gap-3 px-3 py-2.5 cursor-pointer rounded-lg transition-all duration-200 ".concat("system"===r?"bg-primary/10 text-primary":"hover:bg-accent hover:text-accent-foreground"),children:[(0,a.jsx)(n.A,{className:"h-4 w-4"}),(0,a.jsx)("span",{className:"font-medium",children:"System"})]})]})]})}},76411:(e,r,t)=>{"use strict";t.d(r,{X:()=>i});var a=t(76698),s=t(56671),o=t(89519),n=t(25731);let i=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:n.A||"http://localhost:5000/api",r=(0,a.cw)({baseUrl:e,credentials:"include"});return async(e,t,a)=>{let n=await r(e,t,a),i="object"==typeof e&&"suppress401"in e&&e.suppress401;if(n.error){var l;let e=n.error.status,r=(null==(l=n.error.data)?void 0:l.message)||("string"==typeof n.error.error?n.error.error:"Something went wrong");401!==e||i?"PARSING_ERROR"===n.error.status?(console.error("Received invalid JSON (likely HTML):",n.error),s.o.error("Unexpected server response (invalid JSON).")):i||(console.error("[API Error ".concat(e,"]"),r),s.o.error(r)):(t.dispatch((0,o.q0)()),s.o.error("Session expired. Please log in again."),setTimeout(()=>{window.location.href="/protected-redirect"},500))}return n}}},85017:(e,r,t)=>{"use strict";t.r(r),t.d(r,{default:()=>ee});var a=t(95155),s=t(59247),o=t(66681);function n(){return(0,a.jsx)("div",{className:"flex items-center justify-center min-h-screen",children:(0,a.jsxs)("div",{className:"flex flex-col items-center gap-4",children:[(0,a.jsx)("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-primary"}),(0,a.jsx)("p",{className:"text-sm text-muted-foreground",children:"Verifying authentication..."})]})})}function i(e){let{children:r,requiredRole:t,fallback:i}=e,{role:l,isLoggedIn:d,isLoading:c,isError:m,user:u}=(0,o.A)();return c?(0,a.jsx)(n,{}):m?(console.warn("[UserAuthGuard] Authentication error detected"),i||(0,a.jsx)(s.default,{})):d&&u&&l?t&&l!==t?(console.warn("[UserAuthGuard] Role mismatch. Required: ".concat(t,", Current: ").concat(l)),i||(0,a.jsx)(s.default,{})):(0,a.jsx)(a.Fragment,{children:r}):(console.warn("[UserAuthGuard] Authentication failed:",{isLoggedIn:d,hasUser:!!u,hasRole:!!l}),i||(0,a.jsx)(s.default,{}))}var l=t(30285),d=t(44838),c=t(87949),m=t(71007),u=t(35695),h=t(56671),p=t(86434),x=t(34835),g=t(34540),b=t(17652),f=t(34529),v=t(59434);function j(){let[e]=(0,p.Ng)(),r=(0,g.wA)(),t=(0,u.useRouter)(),s=(0,b.c3)("auth.logout"),{isRTL:o}=(0,f.o)(),n=async()=>{try{await e().unwrap(),r(p.ZQ.util.resetApiState())}catch(e){console.error("Logout failed:",e),h.o.error(s("error"))}finally{t.push("/login"),h.o.success(s("success"))}};return(0,a.jsx)("div",{className:(0,v.cn)("w-full",o?"flex flex-row-reverse justify-end":"flex flex-row justify-start"),children:(0,a.jsx)(l.$,{onClick:n,variant:"ghost",className:(0,v.cn)("w-full h-auto p-2 hover:bg-destructive/10 text-destructive",o?"justify-end":"justify-start"),children:(0,a.jsxs)("div",{className:(0,v.cn)("flex items-center gap-2 w-full",o?"flex-row-reverse justify-end":"flex-row justify-start"),children:[(0,a.jsx)(x.A,{className:(0,v.cn)("h-4 w-4 shrink-0",o?"ml-2":"mr-2")}),(0,a.jsx)("span",{className:"font-primary",children:s("button")})]})})})}var y=t(71185),w=t(30512),N=t(30004),k=t(12115),A=t(26126),C=t(20547);function R(e){let{...r}=e;return(0,a.jsx)(C.bL,{"data-slot":"popover",...r})}function E(e){let{...r}=e;return(0,a.jsx)(C.l9,{"data-slot":"popover-trigger",...r})}function S(e){let{className:r,align:t="center",sideOffset:s=4,...o}=e;return(0,a.jsx)(C.ZL,{children:(0,a.jsx)(C.UC,{"data-slot":"popover-content",align:t,sideOffset:s,className:(0,v.cn)("bg-popover text-popover-foreground data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 z-50 w-72 origin-(--radix-popover-content-transform-origin) rounded-md border p-4 shadow-md outline-hidden",r),...o})})}var I=t(57434),D=t(69074),K=t(1243),z=t(14186),U=t(23861),T=t(40646),P=t(54416);function M(){let{isRTL:e}=(0,f.o)(),r=(0,b.c3)("notifications"),[t,s]=(0,k.useState)([{id:"1",type:"assignment",title:r("popup.staticData.assignment.title"),message:r("popup.staticData.assignment.message"),timestamp:"2025-01-23T10:30:00",isRead:!1,priority:"high",actionUrl:"/assignments/math-3"},{id:"2",type:"grade",title:r("popup.staticData.grade.title"),message:r("popup.staticData.grade.message"),timestamp:"2025-01-23T09:15:00",isRead:!1,priority:"medium",actionUrl:"/grades"},{id:"3",type:"event",title:r("popup.staticData.event.title"),message:r("popup.staticData.event.message"),timestamp:"2025-01-23T08:00:00",isRead:!0,priority:"medium",actionUrl:"/schedule"},{id:"4",type:"system",title:r("popup.staticData.system.title"),message:r("popup.staticData.system.message"),timestamp:"2025-01-22T16:45:00",isRead:!0,priority:"low"},{id:"5",type:"reminder",title:r("popup.staticData.reminder.title"),message:r("popup.staticData.reminder.message"),timestamp:"2025-01-22T14:20:00",isRead:!1,priority:"medium",actionUrl:"/library"}]),[o,n]=(0,k.useState)(!1),i=t.filter(e=>!e.isRead).length;return(0,a.jsxs)(R,{open:o,onOpenChange:n,children:[(0,a.jsx)(E,{asChild:!0,children:(0,a.jsxs)(l.$,{variant:"ghost",size:"icon",className:"relative text-muted-foreground hover:text-primary hover:bg-primary/10 rounded-xl transition-all duration-300 group",title:r("popup.title"),children:[(0,a.jsx)(U.A,{className:"h-5 w-5 transition-transform duration-300 group-hover:scale-110"}),i>0&&(0,a.jsx)(A.E,{className:(0,v.cn)("absolute h-5 w-5 p-0 text-xs bg-destructive hover:bg-destructive/90 rounded-full","flex items-center justify-center font-medium animate-pulse shadow-lg","border-2 border-background",e?"-top-1 -left-1":"-top-1 -right-1"),children:i>9?"9+":i})]})}),(0,a.jsxs)(S,{className:(0,v.cn)("w-80 max-w-[calc(100vw-1rem)] bg-background/95 backdrop-blur-xl border border-border/40","rounded-2xl shadow-2xl p-0 overflow-hidden","data-[state=open]:animate-in data-[state=closed]:animate-out","data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0","data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95","data-[state=closed]:slide-out-to-top-1 data-[state=open]:slide-in-from-top-1","transform-gpu"),align:e?"start":"end",sideOffset:12,dir:e?"rtl":"ltr",children:[(0,a.jsxs)("div",{className:"relative overflow-hidden border-b border-border/20",children:[(0,a.jsx)("div",{className:"absolute inset-0 bg-gradient-to-br from-primary/10 via-background/80 to-secondary/10"}),(0,a.jsx)("div",{className:"absolute inset-0 bg-gradient-to-r from-transparent via-primary/5 to-transparent animate-pulse"}),(0,a.jsx)("div",{className:"relative p-4",children:(0,a.jsxs)("div",{className:(0,v.cn)("flex items-center justify-between",e?"flex-row-reverse":"flex-row"),children:[(0,a.jsxs)("div",{className:(0,v.cn)("flex items-center gap-3",e?"flex-row-reverse":"flex-row"),children:[(0,a.jsxs)("div",{className:"relative p-2.5 rounded-xl bg-primary/15 backdrop-blur-sm border border-primary/25 shadow-lg",children:[(0,a.jsx)(U.A,{className:"h-4 w-4 text-primary"}),(0,a.jsx)("div",{className:"absolute inset-0 rounded-xl bg-gradient-to-br from-primary/20 to-transparent"})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("h3",{className:(0,v.cn)("text-base font-semibold text-foreground font-primary",e?"text-right":"text-left"),children:r("popup.title")}),(0,a.jsx)("p",{className:(0,v.cn)("text-xs text-muted-foreground mt-0.5 font-medium",e?"text-right":"text-left"),children:0===i?r("popup.subtitle.allCaughtUp"):r("popup.subtitle.hasNew",{count:i})})]})]}),i>0&&(0,a.jsx)(l.$,{variant:"ghost",size:"sm",onClick:()=>{s(e=>e.map(e=>({...e,isRead:!0})))},className:(0,v.cn)("text-xs text-primary hover:bg-primary/15 rounded-lg h-7 px-3","font-medium transition-all duration-300 hover:scale-105 active:scale-95","shadow-sm hover:shadow-md"),children:r("popup.markAllRead")})]})})]}),(0,a.jsx)("div",{className:"max-h-80 overflow-hidden",children:(0,a.jsx)("div",{className:"max-h-80 overflow-y-auto overflow-x-hidden scroll-smooth p-2 space-y-1",onWheel:e=>{e.stopPropagation();let{scrollTop:r,scrollHeight:t,clientHeight:a}=e.currentTarget;(e.deltaY<0&&0===r||e.deltaY>0&&r+a>=t-1)&&e.preventDefault()},style:{scrollbarWidth:"thin",scrollbarColor:"rgba(0,0,0,0.3) rgba(0,0,0,0.1)"},children:0===t.length?(0,a.jsxs)("div",{className:"p-8 text-center animate-fade-in",children:[(0,a.jsx)("div",{className:"w-16 h-16 bg-gradient-to-br from-muted/20 to-muted/40 rounded-full flex items-center justify-center mx-auto mb-4 shadow-inner",children:(0,a.jsx)(T.A,{className:"w-8 h-8 text-muted-foreground/70"})}),(0,a.jsx)("p",{className:"text-muted-foreground text-sm font-medium mb-1",children:r("popup.noNotifications")}),(0,a.jsx)("p",{className:"text-muted-foreground text-xs",children:r("popup.allCaughtUpMessage")})]}):(0,a.jsx)("div",{className:"p-2 space-y-1 animate-fade-in",children:t.map((t,o)=>{t.type,I.A,c.A,D.A,K.A,z.A;let n={assignment:{bg:"bg-blue-50 dark:bg-blue-500/10",border:"border-blue-200 dark:border-blue-500/30",iconBg:"bg-blue-100 dark:bg-blue-500/20",iconColor:"text-blue-600 dark:text-blue-400",shadow:"shadow-blue-500/20"},grade:{bg:"bg-emerald-50 dark:bg-emerald-500/10",border:"border-emerald-200 dark:border-emerald-500/30",iconBg:"bg-emerald-100 dark:bg-emerald-500/20",iconColor:"text-emerald-600 dark:text-emerald-400",shadow:"shadow-emerald-500/20"},event:{bg:"bg-purple-50 dark:bg-purple-500/10",border:"border-purple-200 dark:border-purple-500/30",iconBg:"bg-purple-100 dark:bg-purple-500/20",iconColor:"text-purple-600 dark:text-purple-400",shadow:"shadow-purple-500/20"},system:{bg:"bg-orange-50 dark:bg-orange-500/10",border:"border-orange-200 dark:border-orange-500/30",iconBg:"bg-orange-100 dark:bg-orange-500/20",iconColor:"text-orange-600 dark:text-orange-400",shadow:"shadow-orange-500/20"},reminder:{bg:"bg-amber-50 dark:bg-amber-500/10",border:"border-amber-200 dark:border-amber-500/30",iconBg:"bg-amber-100 dark:bg-amber-500/20",iconColor:"text-amber-600 dark:text-amber-400",shadow:"shadow-amber-500/20"}}[t.type];return(0,a.jsxs)("div",{className:(0,v.cn)("group relative p-3 mx-1 rounded-xl transition-all duration-300 cursor-pointer","hover:shadow-lg hover:scale-[1.02] active:scale-[0.98] transform-gpu","border backdrop-blur-sm scroll-mb-2",!t.isRead&&[n.bg,n.border,n.shadow,"shadow-md hover:shadow-lg"],t.isRead&&["bg-muted/20 border-border/30 hover:bg-muted/40 hover:border-border/50","hover:shadow-md"],"animate-slide-in-fade opacity-0"),style:{animationDelay:"".concat(100*o,"ms"),animationFillMode:"forwards"},onClick:()=>{var e;e=t.id,s(r=>r.map(r=>r.id===e?{...r,isRead:!0}:r)),t.actionUrl&&console.log("Navigate to:",t.actionUrl)},children:[!t.isRead&&(0,a.jsx)("div",{className:(0,v.cn)("absolute w-2.5 h-2.5 bg-primary rounded-full shadow-sm","animate-pulse-glow border border-primary/30",e?"left-2 bottom-3":"right-2 bottom-3")}),(0,a.jsx)(l.$,{variant:"ghost",size:"icon",className:(0,v.cn)("absolute w-7 h-7 opacity-0 group-hover:opacity-100 transition-all duration-300","hover:bg-destructive/20 hover:text-destructive rounded-lg backdrop-blur-sm","shadow-sm hover:shadow-md transform hover:scale-110 active:scale-95",e?"left-1 top-1":"right-1 top-1"),onClick:e=>{var r;e.stopPropagation(),r=t.id,s(e=>e.filter(e=>e.id!==r))},children:(0,a.jsx)(P.A,{className:"w-3.5 h-3.5"})}),(0,a.jsx)("div",{className:(0,v.cn)("flex gap-3",e?"flex-row-reverse":"flex-row"),children:(0,a.jsxs)("div",{className:"flex-1 min-w-0",children:[(0,a.jsxs)("div",{className:(0,v.cn)("flex items-start justify-between gap-2 mb-2",e?"flex-row-reverse":"flex-row"),children:[(0,a.jsx)("h4",{className:(0,v.cn)("text-sm font-semibold text-foreground line-clamp-1 font-primary leading-tight","transition-colors duration-200 group-hover:text-primary",e?"text-right":"text-left"),children:t.title}),(0,a.jsx)("span",{className:(0,v.cn)("text-xs text-muted-foreground shrink-0 font-medium px-2 py-1","bg-muted/30 rounded-md backdrop-blur-sm",e?"text-left":"text-right"),children:((e,r,t)=>{let a=new Date(e),s=Math.abs(new Date().getTime()-a.getTime())/36e5;if(s<1){let e=Math.floor(60*s);return t?"".concat(r("popup.timeAgo.prefix")," ").concat(e," ").concat(r("popup.timeAgo.minutes")):"".concat(e).concat(r("popup.timeAgo.minutes"))}if(s<24){let e=Math.floor(s);return t?"".concat(r("popup.timeAgo.prefix")," ").concat(e," ").concat(r("popup.timeAgo.hours")):"".concat(e).concat(r("popup.timeAgo.hours"))}{let e=Math.floor(s/24);return t?"".concat(r("popup.timeAgo.prefix")," ").concat(e," ").concat(r("popup.timeAgo.days")):"".concat(e).concat(r("popup.timeAgo.days"))}})(t.timestamp,r,e)})]}),(0,a.jsx)("p",{className:(0,v.cn)("text-xs text-muted-foreground line-clamp-2 leading-relaxed mb-3","transition-colors duration-200 group-hover:text-foreground/80",e?"text-right":"text-left"),children:t.message}),(0,a.jsxs)("div",{className:(0,v.cn)("flex items-center gap-2 flex-wrap",e?"flex-row-reverse justify-end":"flex-row justify-start"),children:["high"===t.priority&&(0,a.jsx)(A.E,{variant:"destructive",className:(0,v.cn)("text-xs py-1 px-2.5 h-6 rounded-lg font-medium shadow-sm","animate-pulse-glow border border-destructive/30"),children:r("popup.priority.high")}),(0,a.jsx)(A.E,{variant:"outline",className:(0,v.cn)("text-xs py-1 px-2.5 h-6 rounded-lg font-medium capitalize","backdrop-blur-sm shadow-sm transition-all duration-200","hover:shadow-md hover:scale-105",n.border,n.iconColor),children:r("popup.types.".concat(t.type))})]})]})})]},t.id)})})})}),t.length>0&&(0,a.jsx)("div",{className:"border-t border-border/20 p-3 bg-gradient-to-r from-muted/20 via-background/60 to-muted/20 backdrop-blur-sm",children:(0,a.jsx)(l.$,{variant:"outline",className:(0,v.cn)("w-full text-sm rounded-xl h-9 font-medium backdrop-blur-sm","transition-all duration-300 hover:scale-[1.02] active:scale-[0.98]","hover:bg-primary/10 hover:border-primary/40 hover:text-primary","shadow-sm hover:shadow-md"),onClick:()=>{n(!1),console.log("Navigate to full notifications page")},children:r("popup.viewAll")})})]})]})}function _(){let{name:e,email:r}=(0,o.A)().user,{isRTL:t}=(0,f.o)(),s=(0,b.c3)("navbar");return(0,a.jsx)("nav",{className:(0,v.cn)("fixed top-0 left-0 right-0 z-50 bg-background/80 backdrop-blur-md border-b border-border shadow-xl w-full",t?"direction-rtl":"direction-ltr"),children:(0,a.jsx)("div",{className:"w-full px-4 sm:px-6 lg:px-8",children:(0,a.jsxs)("div",{className:"flex items-center h-16 w-full relative",children:[(0,a.jsxs)("div",{className:(0,v.cn)("flex items-center gap-3 absolute",t?"right-0":"left-0"),children:[(0,a.jsx)("div",{className:"p-2 rounded-2xl bg-primary shadow-lg",children:(0,a.jsx)(c.A,{className:"h-6 w-6 text-primary-foreground"})}),(0,a.jsxs)("div",{className:"hidden sm:block",children:[(0,a.jsx)("h1",{className:(0,v.cn)("text-xl font-bold text-foreground font-primary",t?"text-right":"text-left"),children:s("brand")}),(0,a.jsx)("p",{className:(0,v.cn)("text-xs text-muted-foreground",t?"text-right":"text-left"),children:s("portal")})]})]}),(0,a.jsxs)("div",{className:(0,v.cn)("flex items-center gap-3 absolute flex-row",t?"left-0 ":"right-0 "),children:[(0,a.jsx)(y.U,{}),(0,a.jsx)(w.c,{}),(0,a.jsx)(M,{}),(0,a.jsxs)(d.rI,{children:[(0,a.jsx)(d.ty,{asChild:!0,children:(0,a.jsx)(l.$,{variant:"ghost",className:"relative h-10 w-10 rounded-2xl hover:bg-primary/10 transition-all duration-200",children:(0,a.jsx)(N.A,{name:e})})}),(0,a.jsxs)(d.SQ,{className:"w-56 bg-card/95 backdrop-blur-md border border-border/50 rounded-2xl shadow-xl",align:t?"start":"end",forceMount:!0,children:[(0,a.jsx)(d.lp,{className:"font-normal",children:(0,a.jsxs)("div",{className:(0,v.cn)("flex flex-col space-y-1",t?"items-end":"items-start"),children:[(0,a.jsx)("p",{className:(0,v.cn)("text-sm font-medium leading-none text-foreground font-primary",t?"text-right":"text-left"),children:e}),(0,a.jsx)("p",{className:(0,v.cn)("text-xs leading-none text-muted-foreground",t?"text-right":"text-left"),children:r})]})}),(0,a.jsx)(d.mB,{className:"bg-border/50"}),(0,a.jsxs)(d._2,{className:(0,v.cn)("hover:bg-primary/10 rounded-xl transition-all duration-200 cursor-pointer",t?"flex-row-reverse":"flex-row"),children:[(0,a.jsx)(m.A,{className:(0,v.cn)("h-4 w-4",t?"ml-2":"mr-2")}),(0,a.jsx)("span",{className:"font-primary",children:s("profile")})]}),(0,a.jsx)(d.mB,{className:"bg-border/50"}),(0,a.jsx)(d._2,{className:"hover:bg-destructive/10 text-destructive rounded-xl transition-all duration-200 cursor-pointer p-0",children:(0,a.jsx)(j,{})})]})]})]})]})})})}var O=t(6874),$=t.n(O),H=t(47655);function B(e){let{className:r,children:t,...s}=e;return(0,a.jsxs)(H.bL,{"data-slot":"scroll-area",className:(0,v.cn)("relative",r),...s,children:[(0,a.jsx)(H.LM,{"data-slot":"scroll-area-viewport",className:"focus-visible:ring-ring/50 size-full rounded-[inherit] transition-[color,box-shadow] outline-none focus-visible:ring-[3px] focus-visible:outline-1",children:t}),(0,a.jsx)(L,{}),(0,a.jsx)(H.OK,{})]})}function L(e){let{className:r,orientation:t="vertical",...s}=e;return(0,a.jsx)(H.VM,{"data-slot":"scroll-area-scrollbar",orientation:t,className:(0,v.cn)("flex touch-none p-px transition-colors select-none","vertical"===t&&"h-full w-2.5 border-l border-l-transparent","horizontal"===t&&"h-2.5 flex-col border-t border-t-transparent",r),...s,children:(0,a.jsx)(H.lr,{"data-slot":"scroll-area-thumb",className:"bg-border relative flex-1 rounded-full"})})}var q=t(74783);function G(e){let{navItems:r,onItemClick:t}=e,s=(0,u.usePathname)(),{isRTL:o}=(0,f.o)(),n=(0,b.c3)();return(0,a.jsx)("div",{className:(0,v.cn)("flex h-full w-full flex-col bg-background/80 backdrop-blur-md border-border/50",o?"border-l":"border-r"),children:(0,a.jsx)(B,{className:"flex-1 px-4 py-8",children:(0,a.jsx)("nav",{className:"space-y-3",children:r.map(e=>{let{labelKey:r,href:i,icon:l,badge:d}=e,c=s.endsWith(i),m=n(r);return(0,a.jsxs)($(),{href:i,onClick:t,className:(0,v.cn)("group flex items-center justify-between px-4 py-3.5 rounded-2xl text-base font-semibold transition-all duration-300 ease-in-out transform hover:scale-[1.02] active:scale-[0.98]",c?"bg-primary text-primary-foreground shadow-lg border border-primary/20":"text-muted-foreground hover:text-primary hover:bg-primary/10 hover:shadow-md hover:border hover:border-primary/20 border border-transparent",o?"flex-row-reverse":"flex-row"),children:[(0,a.jsxs)("div",{className:(0,v.cn)("flex items-center gap-4",o?"flex-row-reverse":"flex-row"),children:[(0,a.jsx)("div",{className:(0,v.cn)("p-2 rounded-xl transition-all duration-300",c?"bg-primary-foreground/20 shadow-sm":"group-hover:bg-primary/20 group-hover:shadow-sm"),children:(0,a.jsx)(l,{className:(0,v.cn)("h-5 w-5 transition-all duration-300",c?"text-primary-foreground":"text-current group-hover:text-primary group-hover:scale-110")})}),(0,a.jsx)("span",{className:(0,v.cn)("font-medium tracking-wide leading-relaxed font-primary",o?"text-right":"text-left"),children:m})]}),d&&(0,a.jsx)(A.E,{variant:c?"secondary":"outline",className:(0,v.cn)("text-xs px-3 py-1 font-semibold transition-all duration-300 rounded-xl shadow-sm",c?"bg-primary-foreground/20 text-primary-foreground border-primary-foreground/30":"bg-primary/10 text-primary border-primary/20 hover:bg-primary/20 group-hover:scale-105"),children:d})]},r)})})})})}function Q(e){let{navItems:r,onItemClick:t}=e,[s,o]=(0,k.useState)(!1),{isRTL:n}=(0,f.o)(),i=k.memo(G);return(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)("aside",{className:(0,v.cn)("fixed top-16 h-[calc(100vh-4rem)] w-72 z-40 hidden lg:flex bg-background/80 backdrop-blur-md border-border/50 shadow-xl",n?"right-0 border-l rounded-l-2xl":"left-0 border-r rounded-r-2xl"),children:(0,a.jsx)(i,{navItems:r,onItemClick:t})}),(0,a.jsx)("button",{onClick:()=>o(!0),className:(0,v.cn)("lg:hidden fixed bottom-8 z-50 bg-background border border-border p-2 rounded-xl shadow-lg transition-all duration-200 hover:bg-primary/10",n?"right-4":"left-4"),children:(0,a.jsx)(q.A,{className:"w-6 h-6 text-foreground"})}),(0,a.jsxs)("aside",{className:(0,v.cn)("fixed top-0 h-full w-72 z-50 bg-background/90 backdrop-blur-md border-border/50 shadow-xl transition-transform duration-300 lg:hidden",n?"right-0 border-l rounded-l-2xl":"left-0 border-r rounded-r-2xl",s?"translate-x-0":n?"translate-x-full":"-translate-x-full"),children:[(0,a.jsx)("div",{className:(0,v.cn)("flex p-4",n?"justify-start":"justify-end"),children:(0,a.jsx)("button",{onClick:()=>o(!1),className:"p-2 rounded-xl hover:bg-primary/10 transition-all duration-200",children:(0,a.jsx)(P.A,{className:"w-5 h-5 text-foreground"})})}),(0,a.jsx)(i,{navItems:r,onItemClick:()=>o(!1)})]}),s&&(0,a.jsx)("div",{className:"fixed inset-0 bg-background/50 backdrop-blur-sm z-40 lg:hidden",onClick:()=>o(!1)})]})}var Z=t(57340),F=t(99245),V=t(25273),Y=t(72713),W=t(381);let X={student:e=>[{labelKey:"sidebar.dashboard",href:"/student/".concat(e),icon:Z.A,badge:""},{labelKey:"sidebar.courses",href:"/student/".concat(e,"/courses"),icon:F.A,badge:"3"},{labelKey:"sidebar.assignments",href:"/student/".concat(e,"/assignment"),icon:V.A,badge:"5"},{labelKey:"sidebar.grades",href:"/student/".concat(e,"/grades"),icon:Y.A,badge:"New"},{labelKey:"sidebar.calendar",href:"/student/".concat(e,"/calendar"),icon:D.A,badge:""},{labelKey:"sidebar.sections",href:"/student/".concat(e,"/sections"),icon:V.A,badge:""},{labelKey:"sidebar.settings",href:"/student/".concat(e,"/settings"),icon:W.A,badge:""}],teacher:e=>[{labelKey:"sidebar.dashboard",href:"/teacher/".concat(e),icon:Z.A,badge:""},{labelKey:"sidebar.courses",href:"/teacher/".concat(e,"/courses"),icon:F.A,badge:"3"},{labelKey:"sidebar.assignments",href:"/teacher/".concat(e,"/assignments"),icon:V.A,badge:"5"},{labelKey:"sidebar.sections",href:"/teacher/".concat(e,"/sections"),icon:V.A,badge:""},{labelKey:"sidebar.settings",href:"/teacher/".concat(e,"/settings"),icon:W.A,badge:""}],admin:e=>[{labelKey:"sidebar.dashboard",href:"/admin/".concat(e),icon:Z.A,badge:""},{labelKey:"sidebar.colleges",href:"/admin/".concat(e,"/colleges"),icon:Y.A,badge:"New"},{labelKey:"sidebar.departments",href:"/admin/".concat(e,"/departments"),icon:Y.A,badge:"New"},{labelKey:"sidebar.courses",href:"/admin/".concat(e,"/courses"),icon:V.A,badge:"5"},{labelKey:"sidebar.teachers",href:"/admin/".concat(e,"/teachers"),icon:F.A,badge:"3"},{labelKey:"sidebar.settings",href:"/admin/".concat(e,"/settings"),icon:W.A,badge:""}],"super-admin":e=>[{labelKey:"sidebar.dashboard",href:"/super-admin/".concat(e),icon:Z.A,badge:""},{labelKey:"sidebar.university",href:"/super-admin/".concat(e,"/university"),icon:F.A,badge:"3"},{labelKey:"sidebar.colleges",href:"/super-admin/".concat(e,"/colleges"),icon:Y.A,badge:"New"},{labelKey:"sidebar.departments",href:"/super-admin/".concat(e,"/departments"),icon:Y.A,badge:"New"},{labelKey:"sidebar.courses",href:"/super-admin/".concat(e,"/courses"),icon:V.A,badge:"5"},{labelKey:"sidebar.teachers",href:"/super-admin/".concat(e,"/teachers"),icon:F.A,badge:"3"},{labelKey:"sidebar.students",href:"/super-admin/".concat(e,"/students"),icon:Y.A,badge:"New"},{labelKey:"sidebar.settings",href:"/super-admin/".concat(e,"/settings"),icon:W.A,badge:""}]};var J=t(85219);function ee(e){let{children:r}=e,[,t,s]=(0,u.usePathname)().split("/"),{isRTL:o}=(0,f.o)(),n=X[t],l=(0,k.useMemo)(()=>n?n(s):[],[n,s]);return(0,a.jsx)(J.aZ,{children:(0,a.jsx)(i,{children:(0,a.jsxs)("div",{className:"min-h-screen bg-background",children:[(0,a.jsx)(_,{}),(0,a.jsxs)("div",{className:"flex pt-16",children:[(0,a.jsx)(Q,{navItems:l}),(0,a.jsx)("div",{className:(0,v.cn)("flex-1",o?"lg:mr-72":"lg:ml-72"),children:r})]})]})})})}},85219:(e,r,t)=>{"use strict";t.d(r,{qw:()=>m,aZ:()=>c});var a=t(95155),s=t(12115);t(35695);var o=t(30285),n=t(1243),i=t(53904),l=t(57340);class d extends s.Component{static getDerivedStateFromError(e){return{hasError:!0,error:e,errorInfo:void 0}}componentDidCatch(e,r){var t,a;console.error("[".concat(this.props.level||"Unknown"," Error Boundary]:"),e),console.error("Error Info:",r),null==(t=(a=this.props).onError)||t.call(a,e,r),this.setState({errorInfo:r})}render(){if(this.state.hasError){if(this.props.fallback)return this.props.fallback;let{level:e="component"}=this.props;return"app"===e?(0,a.jsx)("div",{className:"min-h-screen flex flex-col items-center justify-center p-8 bg-background",children:(0,a.jsxs)("div",{className:"max-w-md text-center",children:[(0,a.jsx)(n.A,{className:"h-20 w-20 text-destructive mx-auto mb-6"}),(0,a.jsx)("h1",{className:"text-3xl font-bold mb-4",children:"Application Error"}),(0,a.jsx)("p",{className:"text-muted-foreground mb-6",children:"The application encountered a critical error. Please refresh the page or contact support if the problem persists."}),(0,a.jsxs)("div",{className:"flex flex-col sm:flex-row gap-3 justify-center",children:[(0,a.jsxs)(o.$,{onClick:this.handleRefresh,className:"flex items-center gap-2",children:[(0,a.jsx)(i.A,{className:"h-4 w-4"}),"Refresh Page"]}),(0,a.jsxs)(o.$,{variant:"outline",onClick:this.handleGoHome,className:"flex items-center gap-2",children:[(0,a.jsx)(l.A,{className:"h-4 w-4"}),"Go Home"]})]}),!1]})}):"page"===e?(0,a.jsxs)("div",{className:"flex flex-col items-center justify-center min-h-[60vh] p-8",children:[(0,a.jsx)(n.A,{className:"h-16 w-16 text-destructive mb-4"}),(0,a.jsx)("h2",{className:"text-2xl font-semibold mb-2",children:"Page Error"}),(0,a.jsx)("p",{className:"text-muted-foreground mb-4 text-center max-w-md",children:"This page encountered an error. You can try refreshing or go back to the previous page."}),(0,a.jsxs)("div",{className:"flex gap-3",children:[(0,a.jsx)(o.$,{onClick:this.handleRetry,variant:"outline",children:"Try Again"}),(0,a.jsxs)(o.$,{onClick:this.handleRefresh,className:"flex items-center gap-2",children:[(0,a.jsx)(i.A,{className:"h-4 w-4"}),"Refresh"]}),this.props.showHomeButton&&(0,a.jsxs)(o.$,{variant:"outline",onClick:this.handleGoHome,className:"flex items-center gap-2",children:[(0,a.jsx)(l.A,{className:"h-4 w-4"}),"Home"]})]})]}):(0,a.jsxs)("div",{className:"p-4 border border-destructive/20 rounded-lg bg-destructive/5",children:[(0,a.jsxs)("div",{className:"flex items-center gap-2 mb-2",children:[(0,a.jsx)(n.A,{className:"h-4 w-4 text-destructive"}),(0,a.jsx)("span",{className:"text-sm font-medium text-destructive",children:"Component Error"})]}),(0,a.jsx)("p",{className:"text-xs text-muted-foreground mb-3",children:"This component failed to load properly."}),(0,a.jsx)(o.$,{size:"sm",variant:"outline",onClick:this.handleRetry,children:"Retry"})]})}return this.props.children}constructor(e){super(e),this.handleRetry=()=>{this.setState({hasError:!1,error:void 0,errorInfo:void 0})},this.handleRefresh=()=>{window.location.reload()},this.handleGoHome=()=>{this.props.onNavigateHome?this.props.onNavigateHome():window.location.href="/"},this.state={hasError:!1}}}function c(e){let{children:r,showHomeButton:t=!0}=e;return(0,a.jsx)(d,{level:"page",showHomeButton:t,onError:(e,r)=>{console.error("[Page Error]:",{error:e.message,stack:e.stack,componentStack:r.componentStack,timestamp:new Date().toISOString(),url:window.location.href})},children:r})}function m(e){let{children:r,fallback:t,componentName:s="Unknown Component"}=e;return(0,a.jsx)(d,{level:"component",fallback:t,onError:(e,r)=>{console.error("[Component Error - ".concat(s,"]:"),{error:e.message,stack:e.stack,componentStack:r.componentStack,timestamp:new Date().toISOString(),componentName:s})},children:r})}},86434:(e,r,t)=>{"use strict";t.d(r,{CR:()=>i,Ng:()=>d,ZQ:()=>n,_L:()=>l});var a=t(70404),s=t(76411),o=t(25731);let n=(0,a.xP)({reducerPath:"authApi",baseQuery:(0,s.X)("".concat(o.A)||"http://localhost:5000/api"),endpoints:e=>({getMe:e.query({query:()=>({url:"/auth",suppress401:!0})}),login:e.mutation({query:e=>({url:"/auth/login",method:"POST",body:e})}),logout:e.mutation({query:()=>({url:"/auth/logout",method:"POST"})})})}),{useGetMeQuery:i,useLoginMutation:l,useLogoutMutation:d}=n},88105:(e,r,t)=>{Promise.resolve().then(t.bind(t,85017))},89519:(e,r,t)=>{"use strict";t.d(r,{Ay:()=>l,Uv:()=>s,q0:()=>i});var a=t(5710),s=function(e){return e.STUDENT="STUDENT",e.TEACHER="TEACHER",e.ADMIN="ADMIN",e.SUPER_ADMIN="SUPER-ADMIN",e}({});let o=(0,a.Z0)({name:"auth",initialState:{id:null,mongoId:null,role:null},reducers:{setAuth:(e,r)=>{e.id=r.payload.id,e.mongoId=r.payload.mongoId,e.role=r.payload.role,console.log("✅ Reducer triggered with:",r.payload)},clearAuth:e=>{e.id=null,e.role=null,e.mongoId=null}}}),{setAuth:n,clearAuth:i}=o.actions,l=o.reducer}},e=>{e.O(0,[5198,4277,59,5222,9449,6453,6874,5952,4486,8441,5964,7358],()=>e(e.s=88105)),_N_E=e.O()}]);