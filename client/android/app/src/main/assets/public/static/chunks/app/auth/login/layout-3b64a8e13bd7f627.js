(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[8004],{25731:(e,r,t)=>{"use strict";t.d(r,{A:()=>o});let o=(t(6267).Ii.isNativePlatform()?"http://192.168.56.1:5000/api":"http://localhost:5000/api")||"http://localhost:5000/api"},33831:(e,r,t)=>{"use strict";t.d(r,{p:()=>o});let o=(e,r)=>{if(!e||!r)return"/";let t=r.split("-")[1];switch(e.toLowerCase().replace(/_/g,"-")){case"student":return"/student/".concat(t);case"admin":return"/admin/".concat(t);case"teacher":return"/teacher/".concat(t);case"super-admin":return"/super-admin/".concat(t);default:return"/"}}},35695:(e,r,t)=>{"use strict";var o=t(18999);t.o(o,"usePathname")&&t.d(r,{usePathname:function(){return o.usePathname}}),t.o(o,"useRouter")&&t.d(r,{useRouter:function(){return o.useRouter}})},66681:(e,r,t)=>{"use strict";t.d(r,{A:()=>a});var o=t(86434);let a=()=>{var e,r,t;let{data:a,isLoading:n,isError:l}=(0,o.CR)();return{user:null==a?void 0:a.data,isLoading:n,isError:l,isLoggedIn:!!a,role:null==a||null==(e=a.data)?void 0:e.role,id:null==a||null==(r=a.data)?void 0:r.id,mongoId:null==a||null==(t=a.data)?void 0:t._id}}},69428:(e,r,t)=>{Promise.resolve().then(t.bind(t,81590))},76411:(e,r,t)=>{"use strict";t.d(r,{X:()=>u});var o=t(76698),a=t(56671),n=t(89519),l=t(25731);let u=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:l.A||"http://localhost:5000/api",r=(0,o.cw)({baseUrl:e,credentials:"include"});return async(e,t,o)=>{let l=await r(e,t,o),u="object"==typeof e&&"suppress401"in e&&e.suppress401;if(l.error){var s;let e=l.error.status,r=(null==(s=l.error.data)?void 0:s.message)||("string"==typeof l.error.error?l.error.error:"Something went wrong");401!==e||u?"PARSING_ERROR"===l.error.status?(console.error("Received invalid JSON (likely HTML):",l.error),a.o.error("Unexpected server response (invalid JSON).")):u||(console.error("[API Error ".concat(e,"]"),r),a.o.error(r)):(t.dispatch((0,n.q0)()),a.o.error("Session expired. Please log in again."),setTimeout(()=>{window.location.href="/protected-redirect"},500))}return l}}},81590:(e,r,t)=>{"use strict";t.r(r),t.d(r,{default:()=>s});var o=t(95155),a=t(12115),n=t(35695),l=t(33831),u=t(66681);function s(e){let{children:r}=e,t=(0,n.useRouter)(),{id:s,role:i,isLoading:d}=(0,u.A)();return(0,a.useEffect)(()=>{if(!d&&s&&i){let e=(0,l.p)(i,s);t.replace(e)}},[s,i,d,t]),(0,o.jsx)(o.Fragment,{children:r})}},86434:(e,r,t)=>{"use strict";t.d(r,{CR:()=>u,Ng:()=>i,ZQ:()=>l,_L:()=>s});var o=t(70404),a=t(76411),n=t(25731);let l=(0,o.xP)({reducerPath:"authApi",baseQuery:(0,a.X)("".concat(n.A)||"http://localhost:5000/api"),endpoints:e=>({getMe:e.query({query:()=>({url:"/auth",suppress401:!0})}),login:e.mutation({query:e=>({url:"/auth/login",method:"POST",body:e})}),logout:e.mutation({query:()=>({url:"/auth/logout",method:"POST"})})})}),{useGetMeQuery:u,useLoginMutation:s,useLogoutMutation:i}=l},89519:(e,r,t)=>{"use strict";t.d(r,{Ay:()=>s,Uv:()=>a,q0:()=>u});var o=t(5710),a=function(e){return e.STUDENT="STUDENT",e.TEACHER="TEACHER",e.ADMIN="ADMIN",e.SUPER_ADMIN="SUPER-ADMIN",e}({});let n=(0,o.Z0)({name:"auth",initialState:{id:null,mongoId:null,role:null},reducers:{setAuth:(e,r)=>{e.id=r.payload.id,e.mongoId=r.payload.mongoId,e.role=r.payload.role,console.log("âœ… Reducer triggered with:",r.payload)},clearAuth:e=>{e.id=null,e.role=null,e.mongoId=null}}}),{setAuth:l,clearAuth:u}=n.actions,s=n.reducer}},e=>{e.O(0,[5198,8441,5964,7358],()=>e(e.s=69428)),_N_E=e.O()}]);