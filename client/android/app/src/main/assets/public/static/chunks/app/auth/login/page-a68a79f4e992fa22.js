(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[4859],{14738:(e,t,r)=>{"use strict";r.d(t,{A:()=>a});let a=(0,r(19946).A)("monitor",[["rect",{width:"20",height:"14",x:"2",y:"3",rx:"2",key:"48i651"}],["line",{x1:"8",x2:"16",y1:"21",y2:"21",key:"1svkeh"}],["line",{x1:"12",x2:"12",y1:"17",y2:"21",key:"vw1qmm"}]])},17652:(e,t,r)=>{"use strict";r.d(t,{c3:()=>n});var a=r(46453);function s(e,t){return(...e)=>{try{return t(...e)}catch{throw Error(void 0)}}}let n=s(0,a.c3);s(0,a.kc)},21565:(e,t,r)=>{Promise.resolve().then(r.bind(r,38508))},25731:(e,t,r)=>{"use strict";r.d(t,{A:()=>a});let a=(r(6267).Ii.isNativePlatform()?"http://192.168.56.1:5000/api":"http://localhost:5000/api")||"http://localhost:5000/api"},30512:(e,t,r)=>{"use strict";r.d(t,{c:()=>d});var a=r(95155),s=r(5196),n=r(30285),o=r(44838),l=r(34529),i=r(28813);let c=e=>{let{country:t,className:r="w-4 h-4"}=e,s=(0,i.VV)(t);return(0,a.jsx)("span",{className:"".concat(r," flex items-center justify-center text-lg leading-none transition-transform duration-200 hover:scale-110"),children:s})};function d(){let{switchLanguage:e,availableLocales:t,currentLocaleInfo:r,isPending:i}=(0,l.o)();return(0,a.jsxs)(o.rI,{children:[(0,a.jsx)(o.ty,{asChild:!0,children:(0,a.jsxs)(n.$,{variant:"outline",size:"sm",disabled:i,className:"h-9 px-3 bg-background hover:bg-accent border-border hover:border-primary/50 transition-all duration-200 shadow-sm hover:shadow-md ".concat(i?"opacity-70 cursor-not-allowed":""),"aria-label":"Current language: ".concat(null==r?void 0:r.name,". Click to change language."),children:[(0,a.jsx)(c,{country:(null==r?void 0:r.code)||"en",className:"w-4 h-4 mr-2 flag-icon ".concat(i?"animate-pulse":"")}),(0,a.jsx)("span",{className:"font-medium",children:null==r?void 0:r.name}),i&&(0,a.jsx)("div",{className:"ml-2 w-3 h-3 border border-current border-t-transparent rounded-full animate-spin","aria-label":"Changing language..."})]})}),(0,a.jsx)(o.SQ,{align:"end",className:"bg-card/95 backdrop-blur-md border border-border/50 shadow-xl rounded-xl min-w-[160px] p-1 dropdown-content-enhanced",sideOffset:4,children:t.map(t=>{let n=(null==r?void 0:r.code)===t.code;return(0,a.jsxs)(o._2,{onClick:()=>{var a;(a=t.code)!==(null==r?void 0:r.code)&&e(a)},disabled:i||n,className:"flex items-center gap-3 px-3 py-2.5 cursor-pointer rounded-lg transition-all duration-200 focus:outline-none focus:ring-2 focus:ring-primary/50 ".concat(n?"bg-primary/10 text-primary cursor-default":i?"opacity-50 cursor-not-allowed":"hover:bg-accent hover:text-accent-foreground active:bg-accent/80"),"aria-label":"Switch to ".concat(t.name),children:[(0,a.jsx)(c,{country:t.code,className:"w-4 h-4 flag-icon ".concat(i&&!n?"opacity-50":"")}),(0,a.jsx)("span",{className:"font-medium flex-1",children:t.name}),n&&(0,a.jsx)(s.A,{className:"w-4 h-4 text-primary animate-in fade-in-0 zoom-in-95 duration-200","aria-label":"Current language"})]},t.code)})})]})}},33831:(e,t,r)=>{"use strict";r.d(t,{p:()=>a});let a=(e,t)=>{if(!e||!t)return"/";let r=t.split("-")[1];switch(e.toLowerCase().replace(/_/g,"-")){case"student":return"/student/".concat(r);case"admin":return"/admin/".concat(r);case"teacher":return"/teacher/".concat(r);case"super-admin":return"/super-admin/".concat(r);default:return"/"}}},35695:(e,t,r)=>{"use strict";var a=r(18999);r.o(a,"usePathname")&&r.d(t,{usePathname:function(){return a.usePathname}}),r.o(a,"useRouter")&&r.d(t,{useRouter:function(){return a.useRouter}})},38508:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>j});var a=r(95155),s=r(33831),n=r(12115),o=r(86434),l=r(35695),i=r(62523),c=r(30285),d=r(17652),u=r(34529),m=r(89519),h=r(71007),p=r(19946);let x=(0,p.A)("lock",[["rect",{width:"18",height:"11",x:"3",y:"11",rx:"2",ry:"2",key:"1w4ew1"}],["path",{d:"M7 11V7a5 5 0 0 1 10 0v4",key:"fwvmzm"}]]),g=(0,p.A)("eye-off",[["path",{d:"M10.733 5.076a10.744 10.744 0 0 1 11.205 6.575 1 1 0 0 1 0 .696 10.747 10.747 0 0 1-1.444 2.49",key:"ct8e1f"}],["path",{d:"M14.084 14.158a3 3 0 0 1-4.242-4.242",key:"151rxh"}],["path",{d:"M17.479 17.499a10.75 10.75 0 0 1-15.417-5.151 1 1 0 0 1 0-.696 10.75 10.75 0 0 1 4.446-5.143",key:"13bj9a"}],["path",{d:"m2 2 20 20",key:"1ooewy"}]]),f=(0,p.A)("eye",[["path",{d:"M2.062 12.348a1 1 0 0 1 0-.696 10.75 10.75 0 0 1 19.876 0 1 1 0 0 1 0 .696 10.75 10.75 0 0 1-19.876 0",key:"1nclc0"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]),y=(0,p.A)("circle-alert",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]]);var b=r(59434),v=r(71185),w=r(30512);function k(){let[e,t]=(0,n.useState)(""),[r,p]=(0,n.useState)(""),[k,j]=(0,n.useState)(!1),[N,A]=(0,n.useState)(""),[S,{isLoading:C}]=(0,o._L)(),E=(0,l.useRouter)(),T=(0,d.c3)("auth.login"),{isRTL:I}=(0,u.o)(),M=async t=>{t.preventDefault(),A("");try{var a;let{data:t}=await S({id:e,password:r}).unwrap();console.log("login data",t);let n=t.role,o=(0,s.p)(n,null==t||null==(a=t.user)?void 0:a.id);if(!function(e){let t=e.toUpperCase().replace(/-/g,"_");return Object.keys(m.Uv).includes(t.toUpperCase())?t:null}(n))return void console.error("Invalid role from backend:",n);E.push(o)}catch(e){console.error("Login failed:",e),400===e.status?A("Invalid credentials. Please try again."):A("")}};return(0,a.jsx)("div",{className:"min-h-screen bg-background flex items-center justify-center px-4 sm:px-6 lg:px-8 relative",children:(0,a.jsx)("div",{className:"p-8 h-full flex flex-col justify-center",children:(0,a.jsx)("div",{className:"w-full max-w-lg",children:(0,a.jsxs)("div",{className:"bg-card rounded-2xl shadow-xl border border-border",style:{width:"480px",minHeight:"600px"},children:[(0,a.jsxs)("div",{className:"text-center mb-8",children:[(0,a.jsx)("div",{className:(0,b.cn)("flex items-center justify-start mb-6 pt-4 px-4",I?"space-x-reverse":"space-x-2"),children:(0,a.jsxs)("div",{className:(0,b.cn)(" flex items-center space-x-3",I?"":" rtl:space-x-reverse"),children:[(0,a.jsx)(v.U,{}),(0,a.jsx)(w.c,{})]})}),(0,a.jsx)("span",{className:"text-3xl font-bold text-primary font-primary ml-2 rtl:ml-0 rtl:mr-2",children:T("brandName")}),(0,a.jsx)("p",{className:"text-muted-foreground text-sm",children:T("subtitle")})]}),(0,a.jsxs)("form",{onSubmit:M,className:"space-y-6 px-4 flex-grow",children:[(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)("label",{className:(0,b.cn)("text-sm pr-2 pl-2 font-medium text-foreground block",I?"text-right":"text-left"),children:T("userIdLabel")}),(0,a.jsxs)("div",{className:"relative",children:[(0,a.jsx)(i.p,{placeholder:T("enterUserId"),value:e,onChange:e=>t(e.target.value),type:"text",required:!0,dir:I?"rtl":"ltr",className:(0,b.cn)("h-12 rounded-md border-border bg-background text-foreground placeholder:text-muted-foreground transition-all duration-200","focus:ring-2 focus:ring-primary/20 focus:border-primary",I?"text-right pr-12 pl-4":"text-left pl-12 pr-4",N&&"border-destructive focus:border-destructive focus:ring-destructive/20")}),(0,a.jsx)(h.A,{className:(0,b.cn)("absolute top-1/2 transform -translate-y-1/2 w-5 h-5 text-muted-foreground transition-colors",I?"right-4":"left-4")})]})]}),(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)("label",{className:(0,b.cn)("text-sm pr-2 pl-2 font-medium text-foreground block",I?"text-right":"text-left"),children:T("password")}),(0,a.jsxs)("div",{className:"relative",children:[(0,a.jsx)(i.p,{placeholder:T("enterPassword"),value:r,onChange:e=>p(e.target.value),type:k?"text":"password",required:!0,dir:I?"rtl":"ltr",className:(0,b.cn)("h-12 rounded-md border-border bg-background text-foreground placeholder:text-muted-foreground transition-all duration-200","focus:ring-2 focus:ring-primary/20 focus:border-primary",I?"text-right pr-12 pl-12":"text-left pl-12 pr-12",N&&"border-destructive focus:border-destructive focus:ring-destructive/20")}),(0,a.jsx)(x,{className:(0,b.cn)("absolute top-1/2 transform -translate-y-1/2 w-5 h-5 text-muted-foreground transition-colors",I?"right-4":"left-4")}),(0,a.jsx)("button",{type:"button",onClick:()=>j(!k),className:(0,b.cn)("absolute top-1/2 transform -translate-y-1/2 p-1 text-muted-foreground hover:text-foreground transition-colors rounded-md",I?"left-3":"right-3"),children:k?(0,a.jsx)(g,{className:"w-5 h-5"}):(0,a.jsx)(f,{className:"w-5 h-5"})})]})]}),N&&(0,a.jsxs)("div",{className:(0,b.cn)("flex items-center p-3 bg-destructive/10 border border-destructive/20 rounded-xl",I?"space-x-reverse":"space-x-2"),children:[(0,a.jsx)(y,{className:"w-4 h-4 text-destructive flex-shrink-0"}),(0,a.jsx)("p",{className:"text-sm text-destructive",children:N})]}),(0,a.jsx)(c.$,{type:"submit",disabled:C||!e.trim()||!r.trim(),className:(0,b.cn)("w-full h-12 bg-primary hover:bg-primary/90 text-primary-foreground font-medium text-base rounded-xl","shadow-lg hover:shadow-xl transition-all duration-200 transform hover:-translate-y-0.5","disabled:opacity-60 disabled:cursor-not-allowed disabled:transform-none disabled:shadow-lg","focus:ring-2 focus:ring-primary/20 focus:ring-offset-2"),children:C?(0,a.jsxs)("div",{className:(0,b.cn)("flex items-center",I?"space-x-reverse":"space-x-2"),children:[(0,a.jsx)("div",{className:"w-4 h-4 border-2 border-current border-t-transparent rounded-full animate-spin"}),(0,a.jsx)("span",{className:I?"mr-2":"ml-2",children:T("loggingIn")})]}):T("submit")})]})]})})})})}function j(){return(0,a.jsx)(k,{})}},51362:(e,t,r)=>{"use strict";r.d(t,{D:()=>c,ThemeProvider:()=>d});var a=r(12115),s=(e,t,r,a,s,n,o,l)=>{let i=document.documentElement,c=["light","dark"];function d(t){var r;(Array.isArray(e)?e:[e]).forEach(e=>{let r="class"===e,a=r&&n?s.map(e=>n[e]||e):s;r?(i.classList.remove(...a),i.classList.add(n&&n[t]?n[t]:t)):i.setAttribute(e,t)}),r=t,l&&c.includes(r)&&(i.style.colorScheme=r)}if(a)d(a);else try{let e=localStorage.getItem(t)||r,a=o&&"system"===e?window.matchMedia("(prefers-color-scheme: dark)").matches?"dark":"light":e;d(a)}catch(e){}},n=["light","dark"],o="(prefers-color-scheme: dark)",l=a.createContext(void 0),i={setTheme:e=>{},themes:[]},c=()=>{var e;return null!=(e=a.useContext(l))?e:i},d=e=>a.useContext(l)?a.createElement(a.Fragment,null,e.children):a.createElement(m,{...e}),u=["light","dark"],m=e=>{let{forcedTheme:t,disableTransitionOnChange:r=!1,enableSystem:s=!0,enableColorScheme:i=!0,storageKey:c="theme",themes:d=u,defaultTheme:m=s?"system":"light",attribute:f="data-theme",value:y,children:b,nonce:v,scriptProps:w}=e,[k,j]=a.useState(()=>p(c,m)),[N,A]=a.useState(()=>"system"===k?g():k),S=y?Object.values(y):d,C=a.useCallback(e=>{let t=e;if(!t)return;"system"===e&&s&&(t=g());let a=y?y[t]:t,o=r?x(v):null,l=document.documentElement,c=e=>{"class"===e?(l.classList.remove(...S),a&&l.classList.add(a)):e.startsWith("data-")&&(a?l.setAttribute(e,a):l.removeAttribute(e))};if(Array.isArray(f)?f.forEach(c):c(f),i){let e=n.includes(m)?m:null,r=n.includes(t)?t:e;l.style.colorScheme=r}null==o||o()},[v]),E=a.useCallback(e=>{let t="function"==typeof e?e(k):e;j(t);try{localStorage.setItem(c,t)}catch(e){}},[k]),T=a.useCallback(e=>{A(g(e)),"system"===k&&s&&!t&&C("system")},[k,t]);a.useEffect(()=>{let e=window.matchMedia(o);return e.addListener(T),T(e),()=>e.removeListener(T)},[T]),a.useEffect(()=>{let e=e=>{e.key===c&&(e.newValue?j(e.newValue):E(m))};return window.addEventListener("storage",e),()=>window.removeEventListener("storage",e)},[E]),a.useEffect(()=>{C(null!=t?t:k)},[t,k]);let I=a.useMemo(()=>({theme:k,setTheme:E,forcedTheme:t,resolvedTheme:"system"===k?N:k,themes:s?[...d,"system"]:d,systemTheme:s?N:void 0}),[k,E,t,N,s,d]);return a.createElement(l.Provider,{value:I},a.createElement(h,{forcedTheme:t,storageKey:c,attribute:f,enableSystem:s,enableColorScheme:i,defaultTheme:m,value:y,themes:d,nonce:v,scriptProps:w}),b)},h=a.memo(e=>{let{forcedTheme:t,storageKey:r,attribute:n,enableSystem:o,enableColorScheme:l,defaultTheme:i,value:c,themes:d,nonce:u,scriptProps:m}=e,h=JSON.stringify([n,r,i,t,d,c,o,l]).slice(1,-1);return a.createElement("script",{...m,suppressHydrationWarning:!0,nonce:"",dangerouslySetInnerHTML:{__html:"(".concat(s.toString(),")(").concat(h,")")}})}),p=(e,t)=>{let r;try{r=localStorage.getItem(e)||void 0}catch(e){}return r||t},x=e=>{let t=document.createElement("style");return e&&t.setAttribute("nonce",e),t.appendChild(document.createTextNode("*,*::before,*::after{-webkit-transition:none!important;-moz-transition:none!important;-o-transition:none!important;-ms-transition:none!important;transition:none!important}")),document.head.appendChild(t),()=>{window.getComputedStyle(document.body),setTimeout(()=>{document.head.removeChild(t)},1)}},g=e=>(e||(e=window.matchMedia(o)),e.matches?"dark":"light")},62098:(e,t,r)=>{"use strict";r.d(t,{A:()=>a});let a=(0,r(19946).A)("sun",[["circle",{cx:"12",cy:"12",r:"4",key:"4exip2"}],["path",{d:"M12 2v2",key:"tus03m"}],["path",{d:"M12 20v2",key:"1lh1kg"}],["path",{d:"m4.93 4.93 1.41 1.41",key:"149t6j"}],["path",{d:"m17.66 17.66 1.41 1.41",key:"ptbguv"}],["path",{d:"M2 12h2",key:"1t8f8n"}],["path",{d:"M20 12h2",key:"1q8mjw"}],["path",{d:"m6.34 17.66-1.41 1.41",key:"1m8zz5"}],["path",{d:"m19.07 4.93-1.41 1.41",key:"1shlcs"}]])},62523:(e,t,r)=>{"use strict";r.d(t,{p:()=>n});var a=r(95155);r(12115);var s=r(59434);function n(e){let{className:t,type:r,...n}=e;return(0,a.jsx)("input",{type:r,"data-slot":"input",className:(0,s.cn)("file:text-foreground placeholder:text-muted-foreground selection:bg-primary selection:text-primary-foreground dark:bg-input/30 border-input flex h-9 w-full min-w-0 rounded-md border bg-transparent px-3 py-1 text-base shadow-xs transition-[color,box-shadow] outline-none file:inline-flex file:h-7 file:border-0 file:bg-transparent file:text-sm file:font-medium disabled:pointer-events-none disabled:cursor-not-allowed disabled:opacity-50 md:text-sm","focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px]","aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive",t),...n})}},71007:(e,t,r)=>{"use strict";r.d(t,{A:()=>a});let a=(0,r(19946).A)("user",[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]])},71185:(e,t,r)=>{"use strict";r.d(t,{U:()=>d});var a=r(95155);r(12115);var s=r(62098),n=r(93509),o=r(14738),l=r(51362),i=r(30285),c=r(44838);function d(){let{setTheme:e,theme:t}=(0,l.D)();return(0,a.jsxs)(c.rI,{children:[(0,a.jsx)(c.ty,{asChild:!0,children:(0,a.jsxs)(i.$,{variant:"ghost",size:"icon",className:"relative hover:bg-accent transition-all duration-200",children:[(0,a.jsx)(s.A,{className:"h-[1.2rem] w-[1.2rem] rotate-0 scale-100 transition-all dark:-rotate-90 dark:scale-0 theme-icon"}),(0,a.jsx)(n.A,{className:"absolute h-[1.2rem] w-[1.2rem] rotate-90 scale-0 transition-all dark:rotate-0 dark:scale-100 theme-icon"}),(0,a.jsx)("span",{className:"sr-only",children:"Toggle theme"})]})}),(0,a.jsxs)(c.SQ,{align:"end",className:"bg-card/95 backdrop-blur-md border border-border/50 shadow-xl rounded-xl min-w-[140px] dropdown-content-enhanced",children:[(0,a.jsxs)(c._2,{onClick:()=>e("light"),className:"flex items-center gap-3 px-3 py-2.5 cursor-pointer rounded-lg transition-all duration-200 ".concat("light"===t?"bg-primary/10 text-primary":"hover:bg-accent hover:text-accent-foreground"),children:[(0,a.jsx)(s.A,{className:"h-4 w-4"}),(0,a.jsx)("span",{className:"font-medium",children:"Light"})]}),(0,a.jsxs)(c._2,{onClick:()=>e("dark"),className:"flex items-center gap-3 px-3 py-2.5 cursor-pointer rounded-lg transition-all duration-200 ".concat("dark"===t?"bg-primary/10 text-primary":"hover:bg-accent hover:text-accent-foreground"),children:[(0,a.jsx)(n.A,{className:"h-4 w-4"}),(0,a.jsx)("span",{className:"font-medium",children:"Dark"})]}),(0,a.jsxs)(c._2,{onClick:()=>e("system"),className:"flex items-center gap-3 px-3 py-2.5 cursor-pointer rounded-lg transition-all duration-200 ".concat("system"===t?"bg-primary/10 text-primary":"hover:bg-accent hover:text-accent-foreground"),children:[(0,a.jsx)(o.A,{className:"h-4 w-4"}),(0,a.jsx)("span",{className:"font-medium",children:"System"})]})]})]})}},76411:(e,t,r)=>{"use strict";r.d(t,{X:()=>l});var a=r(76698),s=r(56671),n=r(89519),o=r(25731);let l=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:o.A||"http://localhost:5000/api",t=(0,a.cw)({baseUrl:e,credentials:"include"});return async(e,r,a)=>{let o=await t(e,r,a),l="object"==typeof e&&"suppress401"in e&&e.suppress401;if(o.error){var i;let e=o.error.status,t=(null==(i=o.error.data)?void 0:i.message)||("string"==typeof o.error.error?o.error.error:"Something went wrong");401!==e||l?"PARSING_ERROR"===o.error.status?(console.error("Received invalid JSON (likely HTML):",o.error),s.o.error("Unexpected server response (invalid JSON).")):l||(console.error("[API Error ".concat(e,"]"),t),s.o.error(t)):(r.dispatch((0,n.q0)()),s.o.error("Session expired. Please log in again."),setTimeout(()=>{window.location.href="/protected-redirect"},500))}return o}}},86434:(e,t,r)=>{"use strict";r.d(t,{CR:()=>l,Ng:()=>c,ZQ:()=>o,_L:()=>i});var a=r(70404),s=r(76411),n=r(25731);let o=(0,a.xP)({reducerPath:"authApi",baseQuery:(0,s.X)("".concat(n.A)||"http://localhost:5000/api"),endpoints:e=>({getMe:e.query({query:()=>({url:"/auth",suppress401:!0})}),login:e.mutation({query:e=>({url:"/auth/login",method:"POST",body:e})}),logout:e.mutation({query:()=>({url:"/auth/logout",method:"POST"})})})}),{useGetMeQuery:l,useLoginMutation:i,useLogoutMutation:c}=o},89519:(e,t,r)=>{"use strict";r.d(t,{Ay:()=>i,Uv:()=>s,q0:()=>l});var a=r(5710),s=function(e){return e.STUDENT="STUDENT",e.TEACHER="TEACHER",e.ADMIN="ADMIN",e.SUPER_ADMIN="SUPER-ADMIN",e}({});let n=(0,a.Z0)({name:"auth",initialState:{id:null,mongoId:null,role:null},reducers:{setAuth:(e,t)=>{e.id=t.payload.id,e.mongoId=t.payload.mongoId,e.role=t.payload.role,console.log("✅ Reducer triggered with:",t.payload)},clearAuth:e=>{e.id=null,e.role=null,e.mongoId=null}}}),{setAuth:o,clearAuth:l}=n.actions,i=n.reducer},93509:(e,t,r)=>{"use strict";r.d(t,{A:()=>a});let a=(0,r(19946).A)("moon",[["path",{d:"M12 3a6 6 0 0 0 9 9 9 9 0 1 1-9-9Z",key:"a7tn18"}]])}},e=>{e.O(0,[5198,4277,59,5222,9449,6453,4486,8441,5964,7358],()=>e(e.s=21565)),_N_E=e.O()}]);